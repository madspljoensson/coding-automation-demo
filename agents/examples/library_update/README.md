# Library Update Example

This example demonstrates an automated library upgrade workflow.

## Scenario

**Work Item**: #12345 - "Upgrade React from v17 to v18"

## Process Flow

1. Azure DevOps work item created with upgrade request
2. Service hook triggers GitHub Action
3. Agent receives prompt with work item context
4. Agent analyzes codebase and identifies changes needed
5. Agent updates package.json and fixes breaking changes
6. Agent runs tests to verify
7. Agent creates PR with detailed description

## Files in This Example

- `work_item.json` - The Azure DevOps work item payload
- `expected_changes.md` - Summary of expected code changes
- `pr_description.md` - Example PR description generated by agent
- `before/` - Code before the upgrade
- `after/` - Code after the upgrade

## Key Changes Required

### 1. Update Dependencies

```diff
// package.json
{
  "dependencies": {
-   "react": "^17.0.2",
-   "react-dom": "^17.0.2"
+   "react": "^18.2.0",
+   "react-dom": "^18.2.0"
  }
}
```

### 2. Update Root Rendering API

```diff
// src/index.js
- import ReactDOM from 'react-dom';
+ import { createRoot } from 'react-dom/client';
import App from './App';

- ReactDOM.render(
-   <React.StrictMode>
-     <App />
-   </React.StrictMode>,
-   document.getElementById('root')
- );
+ const root = createRoot(document.getElementById('root'));
+ root.render(
+   <React.StrictMode>
+     <App />
+   </React.StrictMode>
+ );
```

### 3. Update Test Setup

```diff
// src/setupTests.js
- import { render } from '@testing-library/react';
+ import { render } from '@testing-library/react';
+ // No changes needed - testing library handles React 18
```

## Expected Results

- ✅ All dependencies updated
- ✅ New createRoot API implemented
- ✅ All tests passing
- ✅ No deprecation warnings
- ✅ PR created with clear description

## Time Estimate

- Manual: ~2 hours
- Agent: ~5-10 minutes

## Success Metrics

- Build: ✅ Success
- Tests: ✅ 42/42 passing
- Security audit: ✅ No vulnerabilities
- Bundle size: ⚠️ +2KB (acceptable)

## Agent Logs

```
[2024-01-15 14:31:05] Task started: Work Item #12345
[2024-01-15 14:31:15] Analyzed package.json - found React 17.0.2
[2024-01-15 14:31:20] Reviewed React 18 migration guide
[2024-01-15 14:31:45] Updated package.json to React 18.2.0
[2024-01-15 14:32:10] Modified src/index.js to use createRoot
[2024-01-15 14:32:30] Running npm install...
[2024-01-15 14:33:15] Running npm test...
[2024-01-15 14:35:20] All tests passed ✓
[2024-01-15 14:35:45] Creating branch: work-item-12345
[2024-01-15 14:36:00] Committed changes
[2024-01-15 14:36:30] Created PR #456
[2024-01-15 14:36:35] Task completed successfully
```

## Human Review Notes

When reviewing this PR, check:

1. No unexpected dependency changes
2. React 18 features not accidentally used (if backwards compatibility needed)
3. All component tests still valid
4. No performance regressions
5. Bundle size impact acceptable

## Variations

This example can be adapted for other library upgrades:

- Vue 2 → Vue 3
- Angular version bumps
- Node.js LTS updates
- Python package upgrades (Django, Flask, etc.)
- .NET Core version updates

